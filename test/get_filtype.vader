Execute (Get filetype with no option set):
  let g:vim_requester_default_filetype = '42'
  let ft = requester#main#GetFiletype(['{"a": 1}'])

Then (Default filetype is returned):
  AssertEqual '42', ft


Execute (Get filetype for empty lines):
  let g:vim_requester_default_filetype = '42'
  let g:vim_requester_auto_filetype = 1
  let ft = requester#main#GetFiletype([])

Then (Default filetype is returned):
  AssertEqual '42', ft


Execute (Get filetype for JSON data):
  let g:vim_requester_default_filetype = 'txt'
  let g:vim_requester_auto_filetype = 1
  let ft = requester#main#GetFiletype(['{"a": 1}'])

Then (JSON filetype is returned):
  AssertEqual 'json', ft


Execute (Get filetype for XML data):
  let g:vim_requester_default_filetype = 'txt'
  let g:vim_requester_auto_filetype = 1
  let ft = requester#main#GetFiletype(['<xml>'])

Then (XML filetype is returned):
  AssertEqual 'xml', ft


Execute (Get filetype for HTML data):
  let g:vim_requester_default_filetype = 'txt'
  let g:vim_requester_auto_filetype = 1
  let ft = requester#main#GetFiletype(['<!DOCTYPE html>'])

Then (XML filetype is returned):
  AssertEqual 'html', ft


Execute (Get filetype for protobuf data):
  let g:vim_requester_default_filetype = 'txt'
  let g:vim_requester_auto_filetype = 1
  let ft = requester#main#GetFiletype(['message: "test"'])

Then (pb_text filetype is returned):
  AssertEqual 'pb_text', ft


Execute (Get filetype for unsupported data):
  let g:vim_requester_default_filetype = 'txt'
  let g:vim_requester_auto_filetype = 1
  let ft = requester#main#GetFiletype(['message = "test"'])

Then (Default filetype is returned):
  AssertEqual 'txt', ft
